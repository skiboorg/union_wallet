"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[984],{61984:(e,l,a)=>{a.r(l),a.d(l,{default:()=>Q});var u=a(59835),t=a(60499),o=a(86970),d=a(46190),n=a(31655),s=a(91569),p=a(87270),m=a(18910),i=(a(24409),a(23459)),v=a(17779);const r=(0,u._)("div",{class:"",style:{height:"50px"}},null,-1),c=["src"],b={key:0},w={key:1},_={class:"text-caption"},y={key:2},g={__name:"NewSellOffer",setup(e){const l=(0,d.c)(),a=(0,t.iH)(null),g=(0,m.tv)(),k=(0,n.T)(),f=((0,i.Q)(),(0,t.iH)(null)),q=(0,t.iH)(null),V=(0,t.iH)(null),h=(0,t.iH)(null),W=(0,t.iH)(null),U=((0,u.Fl)((()=>l.addresses[l.currentAddressIdx].address)),(0,u.Fl)((()=>k.user))),F=(0,u.Fl)((()=>l.assets)),S=(0,u.Fl)((()=>l.balances));async function x(){v.log(f.value);const e=await s.h.post("/api/p2p/add_offer",{is_sell:!0,asset_key:f.value.key,wallet:U.value.wallet,amount:q.value,min_amount:V.value,payment_types:a.value,course:h.value,rules:W.value});v.log(e.data),e.data.success?(0,p.d)("positive",e.data.message):(0,p.d)("negative",e.data.message),await k.get_own_offers(),g.push({name:"p2p_index"})}return(e,l)=>{const d=(0,u.up)("page-header"),n=(0,u.up)("q-avatar"),s=(0,u.up)("q-item-section"),p=(0,u.up)("q-item-label"),m=(0,u.up)("q-item"),i=(0,u.up)("q-select"),v=(0,u.up)("q-btn"),g=(0,u.up)("q-input"),k=(0,u.up)("page-body"),Q=(0,u.up)("page");return(0,u.wg)(),(0,u.j4)(Q,null,{default:(0,u.w5)((()=>[(0,u.Wm)(k,{class:"q-pa-md"},{default:(0,u.w5)((()=>[(0,u.Wm)(d,{route_name:"p2p_index"}),r,(0,u.Wm)(i,{outlined:"",rounded:"",options:(0,t.SU)(F),modelValue:f.value,"onUpdate:modelValue":l[0]||(l[0]=e=>f.value=e),"option-label":"name",class:"q-mb-md",behavior:"dialog",label:"Выберите актив для продажи"},{option:(0,u.w5)((e=>[(0,u.Wm)(m,(0,o.vs)((0,u.F4)(e.itemProps)),{default:(0,u.w5)((()=>[(0,u.Wm)(s,{avatar:""},{default:(0,u.w5)((()=>[(0,u.Wm)(n,null,{default:(0,u.w5)((()=>[(0,u._)("img",{src:`https://scan.rupay.pro${e.opt.iconURL}`},null,8,c)])),_:2},1024)])),_:2},1024),(0,u.Wm)(s,null,{default:(0,u.w5)((()=>[(0,u.Wm)(p,{class:"text-bold"},{default:(0,u.w5)((()=>[(0,u.Uk)((0,o.zw)(e.opt.name),1)])),_:2},1024),(0,u.Wm)(p,{caption:""},{default:(0,u.w5)((()=>[(0,u.Uk)("Баланс: "+(0,o.zw)((0,t.SU)(S)[e.opt.key][0][1]),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["options","modelValue"]),f.value?((0,u.wg)(),(0,u.iD)("div",b,[(0,u.Wm)(i,{outlined:"",rounded:"",options:(0,t.SU)(U).payment_types,modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),"use-chips":"",class:"q-mb-md",behavior:"dialog",multiple:"",label:"Выберите платежные ситемы"},null,8,["options","modelValue"])])):(0,u.kq)("",!0),a.value&&a.value.length>0?((0,u.wg)(),(0,u.iD)("div",w,[(0,u._)("p",null,"Ваш баланс "+(0,o.zw)((0,t.SU)(S)[f.value.key][0][1])+" "+(0,o.zw)(f.value.name),1),(0,u.Wm)(g,{outlined:"",rounded:"",modelValue:q.value,"onUpdate:modelValue":l[3]||(l[3]=e=>q.value=e),class:"q-mb-md",type:"number",label:"Введите обьем оффера"},{append:(0,u.w5)((()=>[(0,u.Wm)(v,{onClick:l[2]||(l[2]=e=>q.value=(0,t.SU)(S)[f.value.key][0][1]),size:"10px",unelevated:"",color:"primary","no-caps":"",rounded:"",label:"Продать все"})])),_:1},8,["modelValue"]),(0,u.Wm)(g,{outlined:"",rounded:"",modelValue:V.value,"onUpdate:modelValue":l[4]||(l[4]=e=>V.value=e),class:"q-mb-md",type:"number",label:"Введите минимальный обьем сделки"},null,8,["modelValue"]),(0,u._)("p",_,"Текущий курс: "+(0,o.zw)(f.value.course),1),(0,u.Wm)(g,{outlined:"",rounded:"",modelValue:h.value,"onUpdate:modelValue":l[5]||(l[5]=e=>h.value=e),class:"q-mb-md",type:"number",label:"Введите курс продажи в рублях"},null,8,["modelValue"]),(0,u.Wm)(g,{outlined:"",rounded:"",modelValue:W.value,"onUpdate:modelValue":l[6]||(l[6]=e=>W.value=e),class:"q-mb-md",type:"textarea",label:"Введите условия продажи"},null,8,["modelValue"])])):(0,u.kq)("",!0),q.value&&V.value&&h.value?((0,u.wg)(),(0,u.iD)("div",y,[(0,u.Wm)(v,{dense:"",class:"full-width q-py-md",color:"positive","no-caps":"",unelevated:"",disable:parseFloat(q.value)>parseFloat((0,t.SU)(S)[f.value.key][0][1])||parseFloat(V.value)>parseFloat(q.value),onClick:x,rounded:"",label:`Создать оффер на ${q.value*h.value} руб`},null,8,["disable","label"])])):(0,u.kq)("",!0)])),_:1})])),_:1})}}};var k=a(18401),f=a(490),q=a(76749),V=a(61357),h=a(33115),W=a(13119),U=a(24455),F=a(69984),S=a.n(F);const x=g,Q=x;S()(g,"components",{QSelect:k.Z,QItem:f.Z,QItemSection:q.Z,QAvatar:V.Z,QItemLabel:h.Z,QInput:W.Z,QBtn:U.Z})}}]);