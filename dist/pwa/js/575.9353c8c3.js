"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[575],{25575:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ea});var t=a(59835),n=a(60499),s=a(86970),o=a(91569),r=a(18910),i=a(23459),u=a(98030),d=a(31655),p=a(87270),c=a(17779);const _=(0,t._)("div",{class:"",style:{height:"50px"}},null,-1),w={key:0,class:"text-bold text-center text-primary"},f={key:1},m={key:2},g={key:0},U={key:0,class:"q-mb-md"},b=(0,t._)("p",{class:"text-white caption text-justify"},[(0,t.Uk)("Нажмите эту кпопку при возникновении спорной ситуации. "),(0,t._)("span",{class:"text-bold"},"После нажатия, все действия со сделкой блокируются")],-1),v={key:1},x=(0,t.Uk)("Сделка "),y={class:"text-bold"},k=(0,t.Uk)(" по офферу "),S={class:"text-bold"},h=(0,t.Uk)("  "),z={key:0},q={key:1},D={class:"text-bold"},W=(0,t.Uk)("  по курсу "),C={class:"text-bold"},$=(0,t.Uk)(" на сумму "),j={class:"text-bold"},H=(0,t._)("br",null,null,-1),Q={class:"text-bold text-negative text-uppercase"},V=(0,t._)("br",null,null,-1),Z=(0,t._)("span",{class:"text-bold"},"Условия сделки:",-1),I=(0,t._)("br",null,null,-1),A=(0,t._)("br",null,null,-1),F=(0,t._)("span",{class:"text-bold"},"Платежная система:",-1),T=(0,t._)("br",null,null,-1),K={class:"text-bold"},P=(0,t._)("br",null,null,-1),J={key:2},N=["href"],B=(0,t._)("br",null,null,-1),L=(0,t.Uk)("Верифицирован"),M=(0,t.Uk)("Не верифицирован"),O=(0,t._)("br",null,null,-1),E={key:3},G=["href"],R=(0,t._)("br",null,null,-1),X=(0,t.Uk)("Верифицирован"),Y=(0,t.Uk)("Не верифицирован"),ee=(0,t._)("br",null,null,-1),le={key:0},ae={key:0},te={key:1},ne={key:0},se=(0,t.Uk)("После нажатия на кнопку согласия, с вашего адреса на адрес гаранта будет снята сумма "),oe={class:"text-bold"},re=(0,t.Uk)('. В случае возникновения спорных ситуаций в ходе проведения сделки, нажмите на кнопку "Нужна помощь"'),ie={key:1},ue=(0,t._)("p",{class:"text-bold text-negative text-center text-justify"},"Не переводите оплату до завершения транзакции депонирования!!!",-1),de={key:2},pe=["href"],ce={class:"text-bold"},_e={key:0},we={class:"text-bold"},fe=(0,t.Uk)("Оплату нужно совершить по следующим реквизитам:"),me=(0,t._)("br",null,null,-1),ge=(0,t._)("br",null,null,-1),Ue=(0,t._)("p",{class:"text-caption text-bold text-negative text-justify"},"Добавьте любое подтверждение факта оплаты в поле ниже и подтвердите получение оплаты",-1),be={key:3},ve={key:0},xe=["href"],ye={key:4},ke=["href"],Se={class:"text-bold"},he={key:1},ze=(0,t._)("p",{class:"text-negative text-center items-center"},"Ожидайте подкючения администратора. Сообщения в чате выделены красным цветом",-1),qe=(0,t.Uk)("Сделка "),De={class:"text-bold"},We=(0,t.Uk)(" по офферу "),Ce={class:"text-bold"},$e=(0,t.Uk)("  "),je={key:0},He={key:1},Qe={class:"text-bold"},Ve=(0,t.Uk)("  "),Ze={class:"text-bold text-negative"},Ie=(0,t.Uk)(" по курсу "),Ae={class:"text-bold"},Fe=(0,t.Uk)(" на сумму "),Te={class:"text-bold"},Ke=(0,t._)("br",null,null,-1),Pe=(0,t._)("br",null,null,-1),Je=(0,t.Uk)(" Платежная система: "),Ne={class:"text-bold"},Be=(0,t._)("br",null,null,-1),Le=(0,t._)("span",{class:"text-bold"},"Условия сделки:",-1),Me=(0,t._)("br",null,null,-1),Oe=(0,t._)("br",null,null,-1),Ee=(0,t._)("br",null,null,-1),Ge=(0,t._)("br",null,null,-1),Re={key:2},Xe=["href"],Ye=(0,t._)("br",null,null,-1),el={key:3},ll=["href"],al=(0,t._)("br",null,null,-1),tl={key:2},nl=(0,t._)("p",{class:"text-bold text-center text-positive"},"Админ часть",-1),sl=(0,t._)("br",null,null,-1),ol=(0,t._)("br",null,null,-1),rl=(0,t._)("br",null,null,-1),il=(0,t._)("br",null,null,-1),ul=(0,t._)("br",null,null,-1),dl=(0,t._)("br",null,null,-1),pl=(0,t._)("br",null,null,-1),cl=(0,t.Uk)(" Создатель оффера: "),_l=["href"],wl=(0,t._)("br",null,null,-1),fl=(0,t.Uk)(),ml=(0,t._)("br",null,null,-1),gl=(0,t.Uk)(" Создатель сделки: "),Ul=["href"],bl=(0,t._)("br",null,null,-1),vl={key:0},xl=["href"],yl={class:"text-bold"},kl={key:1},Sl=["href"],hl={class:"text-bold"},zl={key:2},ql=["href"],Dl=(0,t._)("br",null,null,-1),Wl=(0,t._)("br",null,null,-1),Cl={key:3},$l=["href"],jl={class:"text-bold"},Hl={class:"full-height"},Ql=(0,t._)("br",null,null,-1),Vl={key:0},Zl=["href"],Il={class:"flex items-center"},Al={__name:"Trade",setup(e){const l=new Audio("notify.mp3"),Al=(0,r.yj)(),Fl=(0,r.tv)(),{EraChain:Tl}=a(99407),Kl=(0,i.Q)(),Pl=(0,d.T)(),Jl=(0,n.iH)(null),Nl=(0,n.iH)(null),Bl=(0,n.iH)(null),Ll=(0,n.iH)(null),Ml=(0,n.iH)(null),Ol=(0,n.iH)(null),El=(0,n.iH)(null),Gl=(0,n.iH)(null),Rl=(0,n.iH)(!1),Xl=(0,n.iH)(!1),Yl=(0,n.iH)([]),ea=((0,n.iH)(0),(0,n.iH)(3e5)),la="7JXmTnbwuDnpqQ3NwxwzhfGgDk223j13eP",aa=(0,t.Fl)((()=>Pl.user)),ta=(0,t.Fl)((()=>Pl.trade)),na=(0,t.Fl)((()=>ta.value.offer.is_sell?ta.value.offer.user.wallet===aa.value.wallet:ta.value.opponent.wallet===aa.value.wallet));function sa(){Gl.value=setInterval((async function(){await Pl.get_trade()}),5e3)}async function oa(e){let l=aa.value.wallet;"money_receive"===e&&(l=aa.value.is_p2p_admin?ta.value.freeze_user===ta.value.opponent.wallet?ta.value.offer.user.wallet:ta.value.opponent.wallet:ta.value.offer.user.wallet!==aa.value.wallet?ta.value.offer.user.wallet:ta.value.opponent.wallet),c.log(Ml.value),Rl.value=!Rl.value;let a=new FormData;a.set("action",e),Ml.value&&a.set("file",Ml.value),a.set("wallet",l),a.set("uid",ta.value.UID),c.log(a);const t=await(0,o.h)({method:"post",headers:{"content-type":"multipart/form-data"},url:"/api/p2p/trade_action",data:a});t.data.success?(0,p.d)("positive",t.data.message):(0,p.d)("negative",t.data.message),Rl.value=!Rl.value,"delete"===e&&Fl.push({name:"p2p_index"}),"money_receive"===e&&Fl.push({name:"p2p_index"})}async function ra(){Jl.value=new WebSocket(`wss://xn--k1affs.xn--p1ai/ws/trade_chat/${ta.value.UID}`);const e=await o.h.get(`/api/p2p/get_trade_chat?trade_uid=${ta.value.UID}`);c.log(e.data),Yl.value=e.data.messages,Jl.value.onmessage=async e=>{let a=JSON.parse(e.data)["message"];c.log("DATA",a.user.wallet);let t={id:a.id,message:a.message,file:a.file?a.file:null,createdAt:a.createdAt,user:{wallet:a.user.wallet,is_p2p_admin:a.user.is_p2p_admin,fio:a.user.fio}};Yl.value.push(t),ua(),l.play()}}async function ia(e){13===e.keyCode&&Ll.value&&await pa()}function ua(){Xl.value&&(El.value.setScrollPosition("vertical",ea.value,300),ea.value=20*Math.floor(300))}function da(){ua()}async function pa(){Rl.value=!Rl.value;let e=new FormData;e.set("message",JSON.stringify(Ll.value)),e.set("file",Ol.value),e.set("wallet",aa.value.wallet),e.set("trade_uid",ta.value.UID),c.log(e);await(0,o.h)({method:"post",headers:{"content-type":"multipart/form-data"},url:"/api/p2p/add_message_in_trade_chat",data:e});Ll.value=null,Ol.value=null,Rl.value=!Rl.value}async function ca(){Rl.value=!Rl.value;const e=!0,l=await Kl.getKeyPair(),a=new Tl.Type.KeyPair(l),t={assetKey:ta.value.offer.asset.key,amount:ta.value.asset_amount};c.log(a),c.log(t);const n=await u.era.tranRawSendAsset(a,t,la,"Депонирование баланса",`Сделка ${ta.value.id} по офферу ${ta.value.offer.id}`,!1,e);c.log(n),n.error?(0,p.d)("negative",n.error.message):(Nl.value=n.fee,Bl.value=n.raw,await _a()),Rl.value=!Rl.value}async function _a(){const e=await u.era.broadcast64(Bl.value);if(c.log(e),e.error)(0,p.d)("negative",e.message);else{(0,p.d)("positive","Баланс задепонирован");await o.h.post("/api/p2p/trade_action",{action:"freeze_money",uid:ta.value.UID,tx:e.signature,wallet:aa.value.wallet})}}return(0,t.wF)((async()=>{Pl.current_trade_uid=Al.params.uid,await Pl.get_user(),c.log("wallet",aa.value),await Pl.get_trade(),await ra(),ta.value.status.is_need_help&&(Xl.value=!0),sa()})),(0,t.Jd)((async()=>{Jl.value?Jl.value.close():c.log("not connect"),clearInterval(Gl.value)})),(e,l)=>{const a=(0,t.up)("page-header"),o=(0,t.up)("q-btn"),r=(0,t.up)("q-card-section"),i=(0,t.up)("q-card"),u=(0,t.up)("q-badge"),d=(0,t.up)("q-separator"),p=(0,t.up)("q-icon"),c=(0,t.up)("q-file"),Al=(0,t.up)("q-chat-message"),Fl=(0,t.up)("q-scroll-area"),Tl=(0,t.up)("q-input"),Kl=(0,t.up)("q-dialog"),Pl=(0,t.up)("page-body"),Jl=(0,t.up)("page"),Nl=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(Jl,null,{default:(0,t.w5)((()=>[(0,t.Wm)(Pl,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(a,{route_name:"p2p_index"}),_,!(0,n.SU)(ta).can_delete&&(0,n.SU)(ta).status.is_default?((0,t.wg)(),(0,t.iD)("p",w," Отменить сделку можно "+(0,s.zw)(new Date((0,n.SU)(ta).can_delete_time).toLocaleString()),1)):(0,t.kq)("",!0),(0,n.SU)(ta).status.is_default&&(0,n.SU)(ta).can_delete?((0,t.wg)(),(0,t.iD)("div",f,[(0,t.Wm)(o,{rounded:"",class:"full-width q-mb-md","no-caps":"",unelevated:"",color:"negative",onClick:l[0]||(l[0]=e=>oa("delete")),label:"Отменить сделку"})])):(0,t.kq)("",!0),(0,t.Wm)(i,{flat:"",class:(0,s.C_)(["text-bold text-center q-mb-md text-white",`bg-${(0,n.SU)(ta).status.color}`])},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t._)("span",null,"Статус сделки: "+(0,s.zw)((0,n.SU)(ta).status.label)+" ",1)])),_:1})])),_:1},8,["class"]),(0,n.SU)(ta).status.is_declined?((0,t.wg)(),(0,t.iD)("div",Cl,[(0,n.SU)(ta).tx_send?((0,t.wg)(),(0,t.iD)("a",{key:0,class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,n.SU)(ta).tx_return}&lang=en`,target:"_blank"},[(0,t._)("span",jl,"Транзакция возврата "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1)],8,$l)):(0,t.kq)("",!0)])):((0,t.wg)(),(0,t.iD)("div",m,[(0,n.SU)(ta).status.is_need_help?((0,t.wg)(),(0,t.iD)("div",he,[ze,(0,t._)("p",null,[qe,(0,t._)("span",De,"#"+(0,s.zw)((0,n.SU)(ta).id),1),We,(0,t._)("span",Ce,"#"+(0,s.zw)((0,n.SU)(ta).offer.id),1),$e,(0,n.SU)(ta).offer.is_sell?((0,t.wg)(),(0,t.iD)("span",je,(0,s.zw)((0,n.SU)(ta).opponent.wallet===(0,n.SU)(aa).wallet?"покупка":"продажа"),1)):((0,t.wg)(),(0,t.iD)("span",He,(0,s.zw)((0,n.SU)(ta).opponent.wallet===(0,n.SU)(aa).wallet?"продажа":"покупка"),1)),(0,t._)("span",Qe," "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1),Ve,(0,t._)("span",Ze,"комиссия сети 1%, к получению "+(0,s.zw)((0,n.SU)(ta).asset_amount_without_commission)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1),Ie,(0,t._)("span",Ae,(0,s.zw)((0,n.SU)(ta).offer.course)+" руб",1),Fe,(0,t._)("span",Te,(0,s.zw)((0,n.SU)(ta).fiat_amount)+" руб",1),Ke,Pe,Je,(0,t._)("span",Ne,(0,s.zw)((0,n.SU)(ta).payment_type.label),1),Be,Le,Me,(0,t.Uk)((0,s.zw)((0,n.SU)(ta).offer.rules),1),Oe,Ee,(0,t._)("span",null,(0,s.zw)((0,n.SU)(na)?"Покупатель":"Продавец"),1),Ge,(0,n.SU)(ta).offer.user.wallet!==(0,n.SU)(aa).wallet?((0,t.wg)(),(0,t.iD)("span",Re,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,n.SU)(ta).offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)((0,n.SU)(ta).offer.user.fio),9,Xe),Ye,(0,t.Uk)(" Завершенных сделок "+(0,s.zw)((0,n.SU)(ta).offer.user.total_trades),1)])):((0,t.wg)(),(0,t.iD)("span",el,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,n.SU)(ta).opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)((0,n.SU)(ta).opponent.fio),9,ll),al,(0,t.Uk)(" Завершенных сделок "+(0,s.zw)((0,n.SU)(ta).opponent.total_trades),1)]))])])):((0,t.wg)(),(0,t.iD)("div",g,[(0,n.SU)(ta).status.is_default||(0,n.SU)(ta).status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",U,[(0,t.Wm)(i,{flat:"",class:"bg-red-4"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[b,(0,t.Wm)(o,{label:"Нужна помощь админа",loading:Rl.value,onClick:l[1]||(l[1]=e=>oa("need_help")),class:"full-width","no-caps":"",unelevated:"",color:"yellow-4","text-color":"dark",rounded:""},null,8,["loading"])])),_:1})])),_:1})])),(0,n.SU)(aa).is_p2p_admin||(0,n.SU)(ta).status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",v,[(0,t._)("p",null,[x,(0,t._)("span",y,"#"+(0,s.zw)((0,n.SU)(ta).id),1),k,(0,t._)("span",S,"#"+(0,s.zw)((0,n.SU)(ta).offer.id),1),h,(0,n.SU)(ta).offer.is_sell?((0,t.wg)(),(0,t.iD)("span",z,(0,s.zw)((0,n.SU)(ta).opponent.wallet===(0,n.SU)(aa).wallet?"покупка":"продажа"),1)):((0,t.wg)(),(0,t.iD)("span",q,(0,s.zw)((0,n.SU)(ta).opponent.wallet===(0,n.SU)(aa).wallet?"продажа":"покупка"),1)),(0,t._)("span",D," "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1),W,(0,t._)("span",C,(0,s.zw)((0,n.SU)(ta).offer.course)+" руб",1),$,(0,t._)("span",j,(0,s.zw)((0,n.SU)(ta).fiat_amount)+" руб",1),H,(0,t._)("span",Q,"комиссия сети 1%, к получению "+(0,s.zw)((0,n.SU)(ta).asset_amount_without_commission)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1),V,Z,I,(0,t.Uk)((0,s.zw)((0,n.SU)(ta).offer.rules),1),A,F,(0,t.Uk)(" "+(0,s.zw)((0,n.SU)(ta).payment_type.label),1),T,(0,t._)("span",K,(0,s.zw)((0,n.SU)(na)?"Покупатель":"Продавец"),1),P,(0,n.SU)(ta).offer.user.wallet!==(0,n.SU)(aa).wallet?((0,t.wg)(),(0,t.iD)("span",J,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,n.SU)(ta).offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)((0,n.SU)(ta).offer.user.fio?(0,n.SU)(ta).offer.user.fio:(0,n.SU)(ta).offer.user.wallet),9,N),B,(0,n.SU)(ta).offer.user.fio?((0,t.wg)(),(0,t.j4)(u,{key:0,color:"positive"},{default:(0,t.w5)((()=>[L])),_:1})):((0,t.wg)(),(0,t.j4)(u,{key:1,color:"negative"},{default:(0,t.w5)((()=>[M])),_:1})),O,(0,t.Uk)(" Завершенных сделок "+(0,s.zw)((0,n.SU)(ta).offer.user.total_trades),1)])):((0,t.wg)(),(0,t.iD)("span",E,[(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,n.SU)(ta).opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)((0,n.SU)(ta).opponent.fio?(0,n.SU)(ta).opponent.fio:(0,n.SU)(ta).opponent.wallet),9,G),R,(0,n.SU)(ta).opponent.fio?((0,t.wg)(),(0,t.j4)(u,{key:0,color:"positive"},{default:(0,t.w5)((()=>[X])),_:1})):((0,t.wg)(),(0,t.j4)(u,{key:1,color:"negative"},{default:(0,t.w5)((()=>[Y])),_:1})),ee,(0,t.Uk)(" Завершенных сделок "+(0,s.zw)((0,n.SU)(ta).opponent.total_trades),1)]))]),(0,t.Wm)(d,{spaced:"lg"}),(0,n.SU)(ta).status.is_default?((0,t.wg)(),(0,t.iD)("div",le,[(0,n.SU)(ta).offer.user.wallet===(0,n.SU)(aa).wallet?((0,t.wg)(),(0,t.iD)("div",ae,[(0,t.Wm)(o,{loading:Rl.value,label:"Согласен на сделку",rounded:"",color:"positive",class:"full-width q-py-md",onClick:l[2]||(l[2]=e=>oa("trade_accept")),unelevated:"","no-caps":""},null,8,["loading"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,n.SU)(ta).status.is_active?((0,t.wg)(),(0,t.iD)("div",te,[(0,n.SU)(na)?((0,t.wg)(),(0,t.iD)("div",ne,[(0,t._)("p",null,[se,(0,t._)("span",oe,(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1),re]),(0,t.Wm)(o,{loading:Rl.value,label:`Задепонировать ${(0,n.SU)(ta).asset_amount} ${(0,n.SU)(ta).offer.asset.name}`,rounded:"",color:"positive",class:"full-width q-py-md",onClick:ca,unelevated:"","no-caps":""},null,8,["loading","label"])])):((0,t.wg)(),(0,t.iD)("div",ie,[ue,(0,t._)("p",null,"Ожидание депонирования "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1)]))])):(0,t.kq)("",!0),(0,n.SU)(ta).status.is_money_freeze?((0,t.wg)(),(0,t.iD)("div",de,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,n.SU)(ta).tx}&lang=en`,target:"_blank"},[(0,t._)("span",ce,"Транзакция депонирования "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1)],8,pe)]),(0,n.SU)(na)?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",_e,[(0,t._)("p",we,[fe,me,(0,t.Uk)(" Платежная система: "+(0,s.zw)((0,n.SU)(ta).payment_type.label),1),ge,(0,t.Uk)(" Реквизиты: "+(0,s.zw)((0,n.SU)(ta).payment_type.payment_info),1)]),Ue,(0,t.Wm)(c,{outlined:"",rounded:"",label:"Добавьте файл подтверждения оплаты",modelValue:Ml.value,"onUpdate:modelValue":l[3]||(l[3]=e=>Ml.value=e),"bg-color":Ml.value?"positive":"red-1",color:"white",class:"q-mb-md"},{prepend:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","bg-color"]),(0,t.Wm)(o,{loading:Rl.value,disable:!Ml.value,label:Ml.value?"Оплату произвел":"Добавьте файл с оплатой выше",rounded:"",color:Ml.value?"positive":"negative",class:"full-width q-py-md",onClick:l[4]||(l[4]=e=>oa("money_send")),unelevated:"","no-caps":""},null,8,["loading","disable","label","color"])]))])):(0,t.kq)("",!0),(0,n.SU)(ta).status.is_money_sent?((0,t.wg)(),(0,t.iD)("div",be,[(0,n.SU)(na)?((0,t.wg)(),(0,t.iD)("div",ve,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary text-bold",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:(0,n.SU)(ta).send_img,target:"_blank"},"Подтверждение оплаты",8,xe)]),(0,t.Wm)(o,{loading:Rl.value,label:"Оплату получил",rounded:"",color:"positive",class:"full-width q-py-md",onClick:l[5]||(l[5]=e=>oa("money_receive")),unelevated:"","no-caps":""},null,8,["loading"])])):(0,t.kq)("",!0)])):(0,t.kq)("",!0),(0,n.SU)(ta).status.is_money_recieve?((0,t.wg)(),(0,t.iD)("div",ye,[(0,t._)("p",null,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,n.SU)(ta).tx_send}&lang=en`,target:"_blank"},[(0,t._)("span",Se,"Транзакция перевода "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1)],8,ke)])])):(0,t.kq)("",!0)]))])),(0,n.SU)(aa).is_p2p_admin&&!(0,n.SU)(ta).status.is_finished?((0,t.wg)(),(0,t.iD)("div",tl,[(0,t.Wm)(d,{spaced:"lg"}),nl,(0,t._)("p",null,[(0,t.Uk)(" Cделка № "+(0,s.zw)((0,n.SU)(ta).id),1),sl,(0,t.Uk)(" Оффер № "+(0,s.zw)((0,n.SU)(ta).offer.id),1),ol,(0,t.Uk)(" Сумма сделки в рублях: "+(0,s.zw)((0,n.SU)(ta).fiat_amount),1),rl,(0,t.Uk)(" Сумма сделки в активе: "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1),il,ul,(0,t.Uk)(" Тип оффера: "+(0,s.zw)((0,n.SU)(ta).offer.is_sell?"продажа":"покупка"),1),dl,pl,cl,(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,n.SU)(ta).offer.user.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)((0,n.SU)(ta).offer.user.wallet),9,_l),wl,fl,ml,gl,(0,t._)("a",{href:`https://scan.rupay.pro/index/main.html?address=${(0,n.SU)(ta).opponent.wallet}&lang=en`,style:{"text-decoration":"none","border-bottom":"1px dashed"},class:"text-primary text-bold text-caption",target:"_blank"},(0,s.zw)((0,n.SU)(ta).opponent.wallet),9,Ul),bl]),(0,n.SU)(ta).tx?((0,t.wg)(),(0,t.iD)("p",vl,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,n.SU)(ta).tx}&lang=en`,target:"_blank"},[(0,t._)("span",yl,"Транзакция депонирования "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1)],8,xl)])):(0,t.kq)("",!0),(0,n.SU)(ta).tx_send?((0,t.wg)(),(0,t.iD)("p",kl,[(0,t._)("a",{class:"text-primary",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:`https://scan.rupay.pro/index/main.html?tx=${(0,n.SU)(ta).tx_send}&lang=en`,target:"_blank"},[(0,t._)("span",hl,"Транзакция перевода "+(0,s.zw)((0,n.SU)(ta).asset_amount)+" "+(0,s.zw)((0,n.SU)(ta).offer.asset.name),1)],8,Sl)])):(0,t.kq)("",!0),(0,n.SU)(ta).send_img?((0,t.wg)(),(0,t.iD)("p",zl,[(0,t._)("a",{class:"text-primary text-bold",style:{"text-decoration":"none","border-bottom":"1px dashed"},href:(0,n.SU)(ta).send_img,target:"_blank"},"Подтверждение оплаты",8,ql)])):(0,t.kq)("",!0),Dl,Wl,(0,n.SU)(ta).tx?((0,t.wg)(),(0,t.j4)(o,{key:3,loading:Rl.value,label:"Отмена сделки с возвратом задепонированнго баланса продавцу",rounded:"",color:"negative",class:"full-width q-py-md q-mb-md",onClick:l[6]||(l[6]=e=>oa("admin_stop")),unelevated:"","no-caps":""},null,8,["loading"])):(0,t.kq)("",!0),(0,n.SU)(ta).tx?((0,t.wg)(),(0,t.j4)(o,{key:4,loading:Rl.value,label:"Завершить сделку с перечисление средств покупателю",rounded:"",color:"positive",class:"full-width q-py-md q-mb-md",onClick:l[7]||(l[7]=e=>oa("money_receive")),unelevated:"","no-caps":""},null,8,["loading"])):(0,t.kq)("",!0),(0,n.SU)(ta).tx?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(o,{key:5,loading:Rl.value,rounded:"",class:"full-width q-py-md","no-caps":"",unelevated:"",color:"negative",onClick:l[8]||(l[8]=e=>oa("admin_decline")),label:"Отменить сделку"},null,8,["loading"]))])):(0,t.kq)("",!0)])),(0,t.Wm)(Kl,{modelValue:Xl.value,"onUpdate:modelValue":l[12]||(l[12]=e=>Xl.value=e),seamless:"",position:"bottom",onShow:da},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"full-width"},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"q-pt-xl"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(o,{class:"absolute-top-right z-max",flat:"",round:"",icon:"close"},null,512),[[Nl]]),(0,t._)("div",Hl,[(0,t.Wm)(Fl,{ref_key:"messages_wrapper",ref:El,style:{height:"300px"}},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(Yl.value,(e=>((0,t.wg)(),(0,t.j4)(Al,{key:e.id,stamp:new Date(e.createdAt).toLocaleString(),name:e.user.fio,text:[e.message],sent:e.user.wallet===(0,n.SU)(aa).wallet,"bg-color":e.user.is_p2p_admin?"red-7":e.user.wallet===(0,n.SU)(aa).wallet?"green-3":"grey-3","text-color":e.user.is_p2p_admin?"white":""},{name:(0,t.w5)((()=>[(0,t._)("span",{class:(0,s.C_)(e.user.is_p2p_admin?"text-red-7":"")},(0,s.zw)(e.user.fio?e.user.fio:e.user.wallet),3),Ql,e.file?((0,t.wg)(),(0,t.iD)("span",Vl,[(0,t._)("a",{class:"file_link",target:"_blank",href:e.file},"Прикрепленный файл",8,Zl)])):(0,t.kq)("",!0)])),_:2},1032,["stamp","name","text","sent","bg-color","text-color"])))),128))])),_:1},512),(0,t._)("div",Il,[(0,t.Wm)(p,{size:"24px",class:"cursor-pointer q-mr-lg",color:Ol.value?"positive":"grey-6",name:"attach_file"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{style:{position:"absolute",width:"42px",opacity:"0"},modelValue:Ol.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Ol.value=e)},null,8,["modelValue"])])),_:1},8,["color"]),(0,t.Wm)(Tl,{outlined:"",rounded:"",class:"col-grow",loading:Rl.value,disable:Rl.value,onKeydown:ia,modelValue:Ll.value,"onUpdate:modelValue":l[11]||(l[11]=e=>Ll.value=e),label:"Ваше сообщение"},{append:(0,t.w5)((()=>[(0,t.Wm)(o,{round:"",dense:"",disable:!Ll.value,loading:Rl.value,onClick:l[10]||(l[10]=e=>pa()),flat:"",icon:"send"},null,8,["disable","loading"])])),_:1},8,["loading","disable","modelValue"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,n.SU)(ta).status.is_finished?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(o,{key:4,style:{position:"fixed",bottom:"20px",right:"20px"},flat:"",size:"24px",round:"",icon:"las la-comments",onClick:l[13]||(l[13]=e=>Xl.value=!0)},{default:(0,t.w5)((()=>[Yl.value.length>0?((0,t.wg)(),(0,t.j4)(p,{key:0,class:"absolute-top-right",size:"16px",color:"red",name:"priority_high"})):(0,t.kq)("",!0)])),_:1}))])),_:1})])),_:1})}}};var Fl=a(24455),Tl=a(44458),Kl=a(63190),Pl=a(20990),Jl=a(50926),Nl=a(33837),Bl=a(22857),Ll=a(32074),Ml=a(66663),Ol=a(396),El=a(13119),Gl=a(62146),Rl=a(69984),Xl=a.n(Rl);const Yl=Al,ea=Yl;Xl()(Al,"components",{QBtn:Fl.Z,QCard:Tl.Z,QCardSection:Kl.Z,QBadge:Pl.Z,QSeparator:Jl.Z,QFile:Nl.Z,QIcon:Bl.Z,QDialog:Ll.Z,QScrollArea:Ml.Z,QChatMessage:Ol.Z,QInput:El.Z}),Xl()(Al,"directives",{ClosePopup:Gl.Z})}}]);