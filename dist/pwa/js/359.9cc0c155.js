"use strict";(globalThis["webpackChunkrolf_wallet"]=globalThis["webpackChunkrolf_wallet"]||[]).push([[359],{72359:(e,a,l)=>{l.r(a),l.d(a,{default:()=>T});var n=l(59835),t=l(60499),s=l(86970),i=l(18910),u=l(99407),d=l(98030),c=l(23459),o=l(46190),r=l(6827),m=l(17779),p=l(95269)["Buffer"];const g=(0,n._)("div",{class:"",style:{height:"60px"}},null,-1),w={key:0,class:"q-mb-lg"},v={key:1,class:""},b=(0,n._)("p",null,"Основная информация",-1),y={class:"row q-col-gutter-md q-mb-lg"},q={class:"col-6"},f={class:"col-6"},h=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"ФИО",-1),_={class:"q-mb-none text-caption"},k=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"Пол",-1),x={class:"q-mb-none text-caption"},S=(0,n._)("p",{class:"q-mb-none text-weight-medium"},"Дата рождения",-1),U={class:"q-mb-none text-caption"},H={key:0,class:"text-negative"},W={key:1,class:"text-negative"},C={__name:"VerifyPerson",setup(e){const a=(0,i.tv)(),l=(0,c.Q)(),C=(0,o.c)();let D=(0,t.iH)(!1),z=(0,t.iH)(null),A=(0,t.iH)(null),F=(0,t.iH)(null),P=(0,t.iH)(null),Q=(0,t.iH)(null),T=(0,t.iH)(null),V=(0,t.iH)(null);(0,n.Fl)((()=>C.addresses[C.currentAddressIdx].publicKey)),(0,n.Fl)((()=>C.addresses[C.currentAddressIdx].address));async function Z(){const e=await l.getKeyPair(),a=await d.era.tranRawPersonCertify(e,P.value,!1);m.log(a),a.raw&&(Q.value=a.raw,V.value=a.fee)}async function I(){D.value=!0,await Z(),await R(),D.value=!1}async function R(){const e=await d.era.broadcast(Q.value);m.log(e),r.Z.create({color:"info",message:e.message}),D.value=!1,await a.back()}const B=async()=>{D.value=!D.value;const e=await u.EraChain.Type.PersonHuman.parse(A.value);m.log(e),P.value=e,F.value={name:e.name,desc:e.description,image:"data:image/png;base64,"+p.from(e.image).toString("base64"),birthday:e.birthday,deathday:e.deathday,gender:e.gender},D.value=!D.value};function E(){const e=new FileReader;e.addEventListener("load",(async()=>{A.value=e.result,await B()}),!1),z.value&&e.readAsText(z.value)}return(e,a)=>{const l=(0,n.up)("page-header"),i=(0,n.up)("q-file"),u=(0,n.up)("q-btn"),d=(0,n.up)("q-img"),c=(0,n.up)("page-body"),o=(0,n.up)("page");return(0,n.wg)(),(0,n.j4)(o,null,{default:(0,n.w5)((()=>[(0,n.Wm)(c,{class:"q-px-md"},{default:(0,n.w5)((()=>[(0,n.Wm)(l),g,(0,t.SU)(P)?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",w,[(0,n.Wm)(i,{rounded:"",modelValue:(0,t.SU)(z),"onUpdate:modelValue":a[0]||(a[0]=e=>(0,t.dq)(z)?z.value=e:z=e),accept:".txt",dense:"",label:"Выберите файл с raw кодом",outlined:"",clearable:"",class:"q-mb-md"},null,8,["modelValue"]),(0,n.Wm)(u,{rounded:"",onClick:E,"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Проверить RAW код"})])),(0,t.SU)(F)?((0,n.wg)(),(0,n.iD)("div",v,[b,(0,n._)("div",y,[(0,n._)("div",q,[(0,n.Wm)(d,{src:(0,t.SU)(F).image},null,8,["src"])]),(0,n._)("div",f,[h,(0,n._)("p",_,(0,s.zw)((0,t.SU)(F).name),1),k,(0,n._)("p",x,(0,s.zw)(0===(0,t.SU)(F).gender?"Мужской":"Женский"),1),S,(0,n._)("p",U,(0,s.zw)(new Date((0,t.SU)(F).birthday).toLocaleDateString()),1)])]),(0,t.SU)(T)?((0,n.wg)(),(0,n.iD)("p",H,"Комиссия первой транзакции: "+(0,s.zw)((0,t.SU)(T)),1)):(0,n.kq)("",!0),(0,t.SU)(V)?((0,n.wg)(),(0,n.iD)("p",W,"Комиссия транзакции: "+(0,s.zw)((0,t.SU)(V)),1)):(0,n.kq)("",!0),(0,n.Wm)(u,{onClick:I,rounded:"",loading:(0,t.SU)(D),"no-caps":"",unelevated:"",class:"full-width q-py-md",color:"primary",label:"Верифицировать"},null,8,["loading"])])):(0,n.kq)("",!0)])),_:1})])),_:1})}}};var D=l(33837),z=l(24455),A=l(70335),F=l(69984),P=l.n(F);const Q=C,T=Q;P()(C,"components",{QFile:D.Z,QBtn:z.Z,QImg:A.Z})}}]);